import fs from "fs"
import { ArchiveRegistrySubstrate, ArchiveRegistryEVM, archivesRegistrySubstrate, archivesRegistryEVM } from '../src/'


function genTypes(registry: ArchiveRegistrySubstrate | ArchiveRegistryEVM): string {
    const names: string[] = []
    for (const archive of registry.archives) { 
        names.push(`"${archive.network}"`)
    }

    return names.join(", ")
}

fs.writeFileSync(`${__dirname}/../src/chains.ts`, 
`
//
// This file is a autogenerated, DO NOT EDIT. 
// Run npm run gen-types to generate this file from archives.
//

export const knownArchivesSubstrate = [${genTypes(archivesRegistrySubstrate)}] as const;
export const knownArchivesEVM = [${genTypes(archivesRegistryEVM)}] as const;
export type KnownArchivesSubstrate = typeof knownArchivesSubstrate[number];
export type KnownArchivesEVM = typeof knownArchivesEVM[number];
export type KnownArchives = KnownArchivesSubstrate | KnownArchivesEVM;

`
)
